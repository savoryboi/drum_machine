<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
    <title>Drum Machine</title>

</head>
<body>
    <header>
        <h1>Rock Out!</h1>
    </header>
    <main>
        <div class="drum_wrapper">
            <div data-key="83" class="drumBtn" id="kick">
                s
            </div>
            <div data-key="68" class="drumBtn" id="snare">
                d
            </div>
            <div data-key="70" class="drumBtn" id="tom1">
                f
            </div>
            <div data-key="71" class="drumBtn" id="tom2">
                g
            </div>
            <div class="drumBtn" id="tom3">
                h
            </div>
            <div class="drumBtn" id="crash">
                j
            </div>
            <div class="drumBtn" id="hihat">
                k
            </div>
        </div>
    </main>

    <audio data-key="83" src="./assets/audio/Bass-Drum-1.wav"></audio>
    <audio data-key="68" src="./assets/audio/snare.wav"></audio>
    <audio data-key="70" src="./assets/audio/Electro-Tom.wav"></audio>
    <audio data-key="71" src="./assets/audio/Electronic-Tom-2.wav"></audio>

    <script>
        window.addEventListener('keydown', (e) => {
            const key = document.querySelector(`.drumBtn[data-key="${e.keyCode}"]`);
            const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
            if(!audio) return;
            audio.currentTime = 0;
            audio.play();
            key.classList.add('playing');

            function removeTransition(e) {
                if(e.propertyName!== 'transform') return;
                this.classList.remove('playing')
            }

            const keys = document.querySelectorAll('.drumBtn');
            keys.forEach(key => key.addEventListener('transitionend', removeTransition))
        })
    </script>
</body>
</html>