<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
    <title>Drum Machine</title>

</head>
<body>
    <header>
        <h1>Rock Out!</h1>
    </header>
    <main>
        <div class="drum_wrapper">
            <div data-key="83" class="drumBtn" id="kick">
                <p>S</p>
                <img width="40px" height="40px" class="icon" src="./assets/images/kick.png" placeholder="drum icon" alt="kick drum icon">
            </div>
            <div data-key="68" class="drumBtn" id="snare">
                <p>D</p>
                <img width="40px" height="40px" class="icon" src="./assets/images/snare.png" placeholder="drum icon" alt="snare drum icon">
            </div>
            <div data-key="70" class="drumBtn" id="tom1">
                <p>F</p>
                <img width="40px" height="40px" class="icon" src="./assets/images/toms.png" placeholder="drum icon" alt="tom drum icon">
            </div>
            <div data-key="71" class="drumBtn" id="tom2">
                <p>G</p>
                <img width="40px" height="40px" class="icon" src="./assets/images/toms.png" placeholder="drum icon" alt="tom drum icon">
            </div>
            <div data-key="72" class="drumBtn" id="hihat">
                <p>H</p>
                <img width="40px" height="40px" class="icon" src="./assets/images/cymbal.png" placeholder="drum icon" alt="cymbal drum icon">
            </div>
            <div data-key="74" class="drumBtn" id="crash">
                <p>J</p>
                <img width="40px" height="40px" class="icon" src="./assets/images/crash.png" placeholder="drum icon" alt="crash icon">
            </div>
        </div>
    </main>

    <audio data-key="83" src="./assets/audio/Bass-Drum-1.wav"></audio>
    <audio data-key="68" src="./assets/audio/snare.wav"></audio>
    <audio data-key="70" src="./assets/audio/Electro-Tom.wav"></audio>
    <audio data-key="71" src="./assets/audio/Electronic-Tom-2.wav"></audio>
    <audio data-key="72" src="./assets/audio/Closed-Hi-Hat-1.wav"></audio>
    <audio  data-key="74" src="./assets/audio/Crash-Cymbal-1.wav"></audio>

    <script>
        window.addEventListener('keydown', (e) => {
            const key = document.querySelector(`.drumBtn[data-key="${e.keyCode}"]`);
            const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
            if(!audio) return;
            audio.currentTime = 0;
            audio.play();
            key.classList.add('playing');

            function removeTransition(e) {
                if(e.propertyName!== 'transform') return;
                this.classList.remove('playing')
            }

            const keys = document.querySelectorAll('.drumBtn');
            keys.forEach(key => key.addEventListener('transitionend', removeTransition))
        })
    </script>
</body>
</html>